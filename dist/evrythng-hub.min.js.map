{"version":3,"sources":["evrythng-hub.js"],"names":["root","factory","define","amd","load","moduleName","parentRequire","onload","onLoadSuccess","moduleInstance","onLoadFailure","err","failedId","requireModules","requirejs","undef","WS","JWT","Jose","undefined","exports","MQTT","tryLoading","name","module","require","e","EVT","Hub","Evrythng","KJUR","nodeJose","this","isObject","obj","Object","prototype","toString","call","buildUrl","protocol","ip","port","url","generateId","util","base64url","encode","randomBytes","initSecretKey","key","JWK","asKey","encrypt","input","options","JSON","stringify","JWE","createEncrypt","update","final","decrypt","createDecrypt","then","result","plaintext","createJWT","kid","header","alg","typ","claims","iss","aud","sub","jti","data","jws","JWS","sign","verifyJWT","validateOptions","decodeJWT","split","parse","decode","payload","encryptAuthorization","authorization","secretKey","format","encryptPayload","jwt","decryptPayload","isValid","Error","isSupported","method","path","exec","i","localEndpoints","length","test","indexOf","version","defaultSettings","timeout","remote","targetHub","pubSubPlugin","encryptedKeyMap","EVTHubPlugin","settings","setup","customSettings","TypeError","hasOwnProperty","customFields","install","Scope","Resource","Utils","Logger","localApi","args","arguments","previousInterceptors","interceptors","concat","request","filterRemoteRequest","getRequestConfig","buildEncrypted","opts","$this","original","api","apply","catch","cancelled","status","info","localPubSub","Array","slice","$resource","remoteOptions","apiUrl","scope","apiKey","cachedData","cancel","extend","connectOptions","headers","isFunction","splice","security","response","secureCallback","getAvailableHubs","Promise","resolve","getDistributedCollectionId","getDistributedHubs","isRemote","v4","ports","id","originalOptions","all","encryptApiKey","encryptData","encrypted","encryptedKey","encryptedData","res","decryptData","params","filter","cols","collectionId","thngs","hub","properties","encryptedApiKey","cb","msg","resource","decrypted","subscribe","publish","utils","$inject"],"mappings":"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","file":"evrythng-hub.min.js"}